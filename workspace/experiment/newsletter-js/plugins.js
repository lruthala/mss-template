// Avoid `console` errors in browsers that lack a console.
(function() {
    var method;
    var noop = function () {};
    var methods = [
        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',
        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',
        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',
        'timeStamp', 'trace', 'warn'
    ];
    var length = methods.length;
    var console = (window.console = window.console || {});

    while (length--) {
        method = methods[length];

        // Only stub undefined methods.
        if (!console[method]) {
            console[method] = noop;
        }
    }
}());

// Place any jQuery/helper plugins in here.
// require i18n, visible, styleSelect, dateTimePicker
// i18n
function __(){var b=arguments,c=[];for(i=1;i<b.length;i++){c.push(b[i])}return vsprintf(b[0],c)}function vsprintf(b,a){return this.sprintf.apply(this,[b].concat(a))}function sprintf(){var g=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g;var h=arguments,f=0,k=h[f++];var b=function(o,a,l,n){if(!l){l=" "}var m=(o.length>=a)?"":Array(1+a-o.length>>>0).join(l);return n?o+m:m+o};var c=function(n,m,q,a,l,p){var o=a-n.length;if(o>0){if(q||!l){n=b(n,a,p,q)}else{n=n.slice(0,m.length)+b("",o,"0",true)+n.slice(m.length)}}return n};var j=function(q,p,o,r,l,a,n){var m=q>>>0;o=o&&m&&{"2":"0b","8":"0","16":"0x"}[p]||"";q=o+b(m.toString(p),a||0,"0",false);return c(q,o,r,l,n)};var e=function(n,p,l,a,m,o){if(a!=null){n=n.slice(0,a)}return c(n,"",p,l,m,o)};var d=function(A,n,o,s,C,x,m){var a;var w;var l;var B;var u;if(A==="%%"){return"%"}var t=false,p="",r=false,z=false,y=" ";var q=o.length;for(var v=0;o&&v<q;v++){switch(o.charAt(v)){case" ":p=" ";break;case"+":p="+";break;case"-":t=true;break;case"'":y=o.charAt(v+1);break;case"0":r=true;break;case"#":z=true;break}}if(!s){s=0}else{if(s==="*"){s=+h[f++]}else{if(s.charAt(0)=="*"){s=+h[s.slice(1,-1)]}else{s=+s}}}if(s<0){s=-s;t=true}if(!isFinite(s)){throw new Error("sprintf: (minimum-)width must be finite")}if(!x){x="fFeE".indexOf(m)>-1?6:(m==="d")?0:undefined}else{if(x==="*"){x=+h[f++]}else{if(x.charAt(0)=="*"){x=+h[x.slice(1,-1)]}else{x=+x}}}u=n?h[n.slice(0,-1)]:h[f++];switch(m){case"s":return e(String(u),t,s,x,r,y);case"c":return e(String.fromCharCode(+u),t,s,x,r);case"b":return j(u,2,z,t,s,x,r);case"o":return j(u,8,z,t,s,x,r);case"x":return j(u,16,z,t,s,x,r);case"X":return j(u,16,z,t,s,x,r).toUpperCase();case"u":return j(u,10,z,t,s,x,r);case"i":case"d":a=+u||0;a=Math.round(a-a%1);w=a<0?"-":p;u=w+b(String(Math.abs(a)),x,"0",false);return c(u,w,t,s,r);case"e":case"E":case"f":case"F":case"g":case"G":a=+u;w=a<0?"-":p;l=["toExponential","toFixed","toPrecision"]["efg".indexOf(m.toLowerCase())];B=["toString","toUpperCase"]["eEfFgG".indexOf(m)%2];u=w+Math.abs(a)[l](x);return c(u,w,t,s,r)[B]();default:return A}};return k.replace(g,d)};
// visible
jQuery.fn.visible=function(){return this.each(function(){var a=$(this)[0].offsetTop;var c=$(this).height();var b=$(this).parent();$(b).animate({scrollTop:a+c/2-$(b).height()/2},0)})};
// styleSelect
jQuery.fn.styleSelect=function(a){var c={class_wrap:"ul-select-wrap",class_ul:"ul-select",class_tag:"tag",direction:"top",height:190,selected_format:"%s"};var d=$.extend(c,a);var b=this;return this.each(function(){var g=this;if($(this).prop("tagName").toLowerCase()==="select"){var f=$("<div>").addClass(d.class_wrap).css({position:"relative",outline:"none"}).prop("tabindex",0);var e=$("<ul>").addClass(d.class_ul).css({position:"absolute",left:"0px",width:"100%","z-index":999,display:"none","max-height":d.height,"overflow-y":"auto"});if(d.direction=="top"){$(e).css("top","100%")}else{$(e).css("bottom","100%")}$(this).find("option").each(function(i,j){var h=$("<li>").data("value",$(this).val()).html($(this).html());$(e).append(h)});$(f).append(e);$(this).after(f);$(f).focus(function(){$(e).show();$(e).find("li").removeClass("select");$("li.selected",e).last().addClass("select").visible()}).blur(function(){$(e).hide()}).keydown(function(j){if(j.keyCode==38){var i=$(e).find("li.select").prev("li")}else{if(j.keyCode==40){var i=$(e).find("li.select").next("li");if(i.length===0){i=$(e).find("li:eq(0)")}}else{if(j.keyCode==13){$(e).find("li.select").trigger("click");return false}else{var h=String.fromCharCode(j.keyCode);if(/[a-z0-9]/i.test(h)){var i=$("li",e).filter(function(k){return $(this).html().toUpperCase().indexOf(h.toUpperCase())===0}).eq(0)}}}}if(i&&i.length!==0){$(e).find("li").removeClass("select");$(i).addClass("select").visible();return false}return true});$(e).find("li").click(function(){g.selectOption($(this).data("value"));if(!$(g).prop("multiple")){$(f).blur()}});$(g).change(function(){g.syncValue()});$(g).click(function(){$(f).trigger("focus")});$(this).hide();this.selectOption=function(j){var h=$(g).val();h=h instanceof Array?h:[h];var i=(h.indexOf(j)!==-1)?false:true;$(g).find("option").filter(function(k){return $(this).prop("value")==j}).prop("selected",i);$(g).trigger("change");g.syncValue()};this.syncValue=function(){var h=$(g).val();h=h instanceof Array?h:[h];$(e).find("li").removeClass("selected").filter(function(i){return h.indexOf($(this).data("value"))!==-1}).addClass("selected");var j=$("option[hidden]",g).map(function(i,m){return $(this).prop("value")}).toArray();$("li",e).hide().filter(function(i){return j.indexOf($(this).data("value"))===-1}).show();$(f).find("div._tag").remove();for(var k in h){if(h[k]||!$(g).prop("multiple")){var l=$("<div>").data("value",h[k]).html(__(d.selected_format,$(g).find('option[value="'+h[k]+'"]').html())).addClass("_tag").addClass(d.class_tag);$(f).append(l);if($(g).prop("multiple")){$(l).click(function(i){g.selectOption($(this).data("value"))})}}}};this.syncValue()}})};
// dateTimePicker
var DateTimePicker=function(a){return this instanceof DateTimePicker?(this.init.call(this,a),this):new DateTimePicker(a)};DateTimePicker.prototype={init:function(a){if(a=$.extend({trigger:["focus"],wrap_class:"datetimepicker",day_name:[__("Su"),__("Mo"),__("Tu"),__("We"),__("Th"),__("Fr"),__("Sa")],month_name:[__("January"),__("February"),__("March"),__("April"),__("May"),__("June"),__("July"),__("August"),__("September"),__("October"),__("November"),__("December")],day_first:0,picker:["date","time"],min_step:5,time_name:[__("AM"),__("PM")],paging:['<i class="icon-i-arrow-left"></i>','<i class="icon-i-arrow-right"></i>'],timezone_title:null,get_utc:!1,format:"m/d/Y h:i A",filter:function(){return!0},filter_show:function(){return!0},afterDraw:function(){},onChange:function(){},parse_only:!1,addon_buttons:[]},a),this.options=a,this.options.parse_only)return void $(this.options.element).html(this.formatResult(new Date(Date.parse($(a.element).html()))));a.day_name=a.day_name.slice(a.day_first).concat(a.day_name.slice(0,a.day_first)),a.day_index=[];for(var b=0;b<a.day_name.length;b++)a.day_index.push((a.day_first+b+7)%7);this.picker=$("<div>").addClass("hide").addClass(a.wrap_class),this.date=new Date,""!=$(a.element).val()&&(this.date=this.parseInput($(a.element).val()),this.date===!1?this.date=new Date:$(this.options.element).val(this.formatResult(this.date))),this.date.setMinutes(this.date.getMinutes()+this.options.min_step-this.date.getMinutes()%this.options.min_step),this.date_show=new Date(this.date.getTime()),a.get_utc&&(a.utc=$("<input>").prop({name:$(this.options.element).prop("name")+"_UTC",type:"hidden"}),$(a.element).before(a.utc)),this.reloadPicker();var c=this;$(a.element).prop("readonly",!0).addClass("datetime-picker").wrap($("<div>").css({display:$(a.element).css("display"),position:"relative"}).click(function(){c.prevent_blur=!0})).after(c.picker),$(a.element).focus(function(){$(c.picker).css({position:"absolute",overflow:"visible",top:$(a.element).outerHeight()+"px",left:"0px"}).removeClass("hide").parent().css({"z-index":1e3})}),$(document).bind("click",function(){c.prevent_blur||$(c.picker).addClass("hide").parent().css({"z-index":1}),c.prevent_blur=!1})},formatResult:function(a){var b=this.options.format;return b=b.replace("m",this.string2(a.getMonth()+1)).replace("d",this.string2(a.getDate())).replace("Y",this.string2(a.getFullYear())).replace("H",this.string2(a.getHours())).replace("h",this.get12Hours(a.getHours())).replace("A",this.getAmPm(a.getHours())).replace("i",this.string2(a.getMinutes()))},reloadPicker:function(a){var b=this;if(this.picker.empty(),-1!==this.options.picker.indexOf("date")&&$(this.picker).append(this.getDatePicker(this.date_show)),-1!==this.options.picker.indexOf("time")&&$(this.picker).append(this.getTimePicker()),this.options.timezone_title&&$(this.picker).append($("<div>").addClass("timezone").append(this.options.timezone_title)),a&&$(this.options.element).val(this.formatResult(this.date)),this.options.utc&&$(this.options.utc).val(this.date.toUTCString()),$("select",this.picker).styleSelect({class_wrap:"ul-dropdown-wrap time-picker",direction:"bottom"}),$(".time-picker:eq(0)",this.picker).css({"margin-left":"0px"}),this.options.addon_buttons.length>0){var c=$("<div>").addClass("addon-buttons");for(var d in this.options.addon_buttons){var e=$.extend({title:"",cls:"",callback:function(){}},this.options.addon_buttons[d]);$(c).append($("<button>").prop({type:"button"}).addClass(e.cls).data("callback",e.callback).click(function(){$(this).data("callback").call(b)}).html(e.title))}$(this.picker).append(c)}this.options.afterDraw.call(this)},getDatePicker:function(a){var b=this,c=new Date(a.getTime());c.setDate(1);var d=c.getDay();c.setMonth(c.getMonth()+1),c.setDate(0);var e=c.getDate(),f=d-b.options.day_index[0],g=Math.ceil((f+e)/7);return[$("<div>").addClass("paging").append(function(){return[$("<span>").addClass("prev").append(b.options.paging[0]).click(function(){b.date_show.setMonth(b.date_show.getMonth()-1),b.options.filter_show(b.date_show)?b.reloadPicker():b.date_show.setMonth(b.date_show.getMonth()+1)}),$("<div>").append([b.options.month_name[c.getMonth()],", ",c.getFullYear()]),$("<span>").addClass("next").append(b.options.paging[1]).click(function(){b.date_show.setMonth(b.date_show.getMonth()+1),b.options.filter_show(b.date_show)?b.reloadPicker():b.date_show.setMonth(b.date_show.getMonth()-1)})]}),$("<table>").append(function(){return[$("<thead>").append(function(){return $(b.options.day_name).map(function(a,b){return $("<td>").append(b)}).toArray()}),$("<tbody>").append(function(){for(var c=[],d=0;g>d;d++)c.push($("<tr>").append(function(){for(var c=[],e=0;7>e;e++){var g=new Date(a.getTime());g.setDate(-f+(e+1)+7*d);var h=b.options.filter.call(b,g);c.push($("<td>").addClass(function(){var c=[];return h||c.push("unvailable"),g.getDate()==b.date.getDate()&&g.getMonth()==b.date.getMonth()&&g.getFullYear()==b.date.getFullYear()&&c.push("cur-date"),c.push(g.getMonth()==a.getMonth()?"cur-month":"near-month"),c.join(" ")}).data({date:g,available:h}).append(g.getDate()).click(function(){if(-1===b.options.picker.indexOf("time")&&$(document).triggerHandler("click"),$(this).data("available")){var a=$(this).data("date");a.setHours(b.date.getHours()),a.setMinutes(b.date.getMinutes()),a.setSeconds(b.date.getSeconds()),b.date=new Date(a.getTime()),b.date_show=new Date(a.getTime()),b.options.onChange.call(b),b.reloadPicker(!0)}}))}return c}));return c})]})]},getTimePicker:function(){var a=this;return $("<div>").append(function(){return[$("<select>").append(function(){var b=[],c=new Date(a.date.getTime());c.setMinutes(0);for(var d=0;24>d;d++)c.setHours(d),b.push($("<option>").prop({selected:d==a.date.getHours(),hidden:1!=a.options.filter.call(a,c)}).val(d).append(function(){return a.get12Hours(d)+"&nbsp;"+a.getAmPm(d)}));return b}).change(function(){a.date.setHours($(this).val()),a.options.onChange.call(a),a.reloadPicker(!0)}),$("<select>").append(function(){for(var b=[],c=new Date(a.date.getTime()),d=0;60>d;d+=a.options.min_step)c.setMinutes(d),b.push($("<option>").prop({selected:d==a.date.getMinutes(),hidden:1!=a.options.filter.call(a,c)}).val(d).append(a.string2(d)));return b}).change(function(){a.date.setMinutes($(this).val()),a.options.onChange.call(a),a.reloadPicker(!0)})]})},string2:function(a){return a=a.toString(),a.length>1?a:"0"+a},getAmPm:function(a){return 12>a?this.options.time_name[0]:this.options.time_name[1]},get12Hours:function(a){var b=12>a?a:a-12;return 0==b&&(b=12),this.string2(b)},parseInput:function(a){var b=new Date(Date.parse(a));return isNaN(b.getTime())?!1:b},closePicker:function(){$(document).triggerHandler("click")},setValue:function(a){$(this.options.element).val(a)},getNearValidDate:function(a,b){b||(b=60*this.options.min_step);for(var c=1e4;1!=this.options.filter(a)&&c>0;)a.setSeconds(a.getSeconds()+b),c--;return c>0?a:!1},callback:function(a){a.call(this)}},$.fn.dateTimePicker=function(a){return this.each(function(){var b=$(this).data("DateTimePicker");b||(a.element=this,$(this).data("DateTimePicker",new DateTimePicker(a))),"string"==typeof a&&$(this).data("DateTimePicker")[a].call(this)})},$.fn.dateTimePickerRange=function(){var a=$(this).eq(0).data("DateTimePicker"),b=$(this).eq(1).data("DateTimePicker");return b.options.filter=function(b){return b.getTime()<a.date.getTime()?!1:!0},b.options.filter_show=function(b){return b.getYear()>a.date.getYear()||b.getYear()==a.date.getYear()&&b.getMonth()>=a.date.getMonth()},a.options.onChange=function(){b.options.filter(b.date)?b.reloadPicker():(b.date=new Date(this.date.getTime()),b.date_show=new Date(this.date.getTime()),b.reloadPicker(!0))},a.options.onChange.call(a),this};
